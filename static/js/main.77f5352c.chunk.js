(this["webpackJsonptrivia-react-redux"]=this["webpackJsonptrivia-react-redux"]||[]).push([[0],{26:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},31:function(e,t,a){e.exports=a(48)},39:function(e,t,a){},47:function(e,t){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),s=a.n(c),o=a(11),i=a(12),l=(a(39),a(2)),u=a(15),m=a.n(u),p=a(19),d=a(20),b=a(3),f=a(4),h=a(6),v=a(5),g=function(e){return{type:"GET_NAME",payload:e}},y=function(e){return{type:"GET_EMAIL",payload:e}},E=function(e){return{type:"GET_SCORE",payload:e}},O=function(e){return{type:"GET_ASSERTION",payload:e}},k=a(26),w=a.n(k),j=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={nome:"",email:"",btnDisabled:!0},e.onHandle=function(t){var a=t.target,n=a.value,r=a.name;e.setState(Object(d.a)({},r,n),e.activateButton())},e.activateButton=function(){var t=e.state,a=t.nome,n=t.email;a.length>1&&n.length>1?e.setState({btnDisabled:!1}):e.setState({btnDisabled:!0})},e.submitForm=function(t){t.preventDefault(),e.funcFetch()},e.funcFetch=Object(p.a)(m.a.mark((function t(){var a,n,r,c,s,o,i,l;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.nome,r=a.email,"https://opentdb.com/api_token.php?command=request",t.prev=2,t.next=5,fetch("https://opentdb.com/api_token.php?command=request");case 5:return c=t.sent,t.next=8,c.json();case 8:s=t.sent,o=e.props,i=o.dispatch,l=o.history,i(g(n)),i(y(r)),localStorage.setItem("token",s.token),l.push("/game"),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),console.error(t.t0);case 19:case"end":return t.stop()}}),t,null,[[2,16]])}))),e}return Object(f.a)(a,[{key:"render",value:function(){var e=this.state,t=e.nome,a=e.email,n=e.btnDisabled;return r.a.createElement("div",{className:"login"},r.a.createElement("header",{className:"login-header"},r.a.createElement("img",{src:w.a,className:"login-logo",alt:"logo"}),r.a.createElement("p",null,"SUA VEZ")),r.a.createElement("form",{onSubmit:this.submitForm},r.a.createElement("input",{name:"nome",value:t,onChange:this.onHandle,"data-testid":"input-player-name",type:"text",placeholder:"Nome"}),r.a.createElement("br",null),r.a.createElement("input",{name:"email",value:a,onChange:this.onHandle,"data-testid":"input-gravatar-email",type:"text",placeholder:"Email"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{type:"submit","data-testid":"btn-play",disabled:n},"Play")),r.a.createElement("br",null),r.a.createElement(i.b,{to:"/settings","data-testid":"btn-settings"},"Settings"))}}]),a}(n.Component),S=Object(o.b)()(j),x=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.category,a=e.correctAnswer,n=e.answers,c=e.question,s=e.answerF,o=e.answered;return r.a.createElement("main",{className:"question"},r.a.createElement("h1",{"data-testid":"question-category"},t),r.a.createElement("h2",{"data-testid":"question-text"},c),r.a.createElement("div",{"data-testid":"answer-options",className:"question-options"},n.map((function(e,t){return e!==a?r.a.createElement("button",{key:e,type:"button","data-testid":"wrong-answer-".concat(t),onClick:s,className:o?"question-wrong":void 0,disabled:o},e):r.a.createElement("button",{key:e,type:"button","data-testid":"correct-answer",onClick:s,className:o?"question-right":void 0,disabled:o},e)}))))}}]),a}(n.Component),N=a(28),A=a.n(N),q=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={emailString:""},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.email,t=A()(e).toString();this.setState({emailString:t})}},{key:"render",value:function(){var e=this.state.emailString,t=this.props,a=t.name,n=t.score;return r.a.createElement("header",{className:"game-header"},r.a.createElement("img",{src:"".concat("https://www.gravatar.com/avatar/").concat(e),alt:"imagem jogador","data-testid":"header-profile-picture"}),r.a.createElement("span",{"data-testid":"header-player-name"},a),r.a.createElement("span",null,"Pontua\xe7\xe3o: "),r.a.createElement("span",{"data-testid":"header-score"},n))}}]),a}(n.Component),_=Object(o.b)((function(e){var t=e.player;return{name:t.name,score:t.score,email:t.gravatarEmail}}))(q),T=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={questions:[],category:"",correctAnswer:"",difficulty:"",answers:[],question:"",index:0,answered:!1,timer:30,next:!1},e.counter=function(){e.timeLeft=setInterval((function(){e.setState((function(e){return{timer:e.timer-1}}))}),1e3)},e.getQuestions=Object(p.a)(m.a.mark((function t(){var a,n,r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=localStorage.getItem("token"),5,n="https://opentdb.com/api.php?amount=".concat(5,"&token=").concat(a),t.next=5,fetch(n);case 5:return r=t.sent,t.next=8,r.json();case 8:c=t.sent,e.getTrivia(c);case 10:case"end":return t.stop()}}),t)}))),e.getTrivia=function(t){var a=t.results,n=t.response_code,r=e.props.history;3===n?(localStorage.setItem("token",""),r.push("/")):e.setState({questions:a,category:a[0].category,correctAnswer:a[0].correct_answer,difficulty:a[0].difficulty,answers:a[0].incorrect_answers.concat(a[0].correct_answer).sort((function(){return Math.random()-.5})),question:a[0].question,index:0})},e.answer=function(t){"correct-answer"===t.target.dataset.testid&&e.setScore(),clearInterval(e.timeLeft),e.setState({timer:30,answered:!0,next:!0})},e.timesUp=function(){clearInterval(e.timeLeft),e.setState({timer:30,answered:!0,next:!0})},e.nextQuestion=function(){var t=e.state,a=t.questions,n=t.index,r=e.props.history,c=n+1;4===n?r.push("/feedback"):(e.setState({category:a[c].category,correctAnswer:a[c].correct_answer,answers:a[c].incorrect_answers.concat(a[c].correct_answer),question:a[c].question,index:c,answered:!1,next:!1}),e.counter())},e.setScore=function(){var t=e.state,a=t.timer,n=t.difficulty,r=e.props,c=r.dispatch,s=r.score,o=r.assertions,i=0;switch(n){case"easy":i=1;break;case"medium":i=2;break;case"hard":i=3;break;default:i=0}var l=o+1;c(E(s+(10+a*i))),c(O(l))},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.getQuestions(),this.counter()}},{key:"componentDidUpdate",value:function(){0===this.state.timer&&this.timesUp()}},{key:"render",value:function(){var e=this.state,t=e.category,a=e.correctAnswer,n=e.answers,c=e.question,s=e.answered,o=e.next,i=e.index,l=e.timer;return r.a.createElement(r.a.Fragment,null,r.a.createElement(_,null),r.a.createElement("div",{className:"container"},r.a.createElement(x,{category:t,correctAnswer:a,answers:n,question:c,nextQuestion:this.nextQuestion,answerF:this.answer,answered:s}),o&&r.a.createElement("button",{className:"next",type:"button","data-testid":"btn-next",onClick:this.nextQuestion},4===i?"Feedback":"Next"),r.a.createElement("p",{className:"timer"},"Tempo restante:"),r.a.createElement("p",{className:"timer"},l)))}}]),a}(n.Component),C=Object(o.b)((function(e){var t=e.player;return{name:t.name,assertions:t.assertions,score:t.score,email:t.gravatarEmail}}))(T),I=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){return r.a.createElement("h1",{"data-testid":"settings-title"},"Settings")}}]),a}(n.Component),D=a(30),G=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).message=function(){return e.props.assertions<3?"Could be better...":"Well Done!"},e}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.assertions,a=e.score;return r.a.createElement("div",{className:"results"},r.a.createElement("p",{"data-testid":"feedback-text"},this.message()),r.a.createElement("span",null,"Pontua\xe7\xe3o: "),r.a.createElement("span",{"data-testid":"feedback-total-score"},a),r.a.createElement("br",null),r.a.createElement("span",null,"Acertos: "),r.a.createElement("span",{"data-testid":"feedback-total-question"},t),r.a.createElement("br",null),r.a.createElement(i.b,{className:"button-feedback",to:"/ranking","data-testid":"btn-ranking"},"Ranking"),r.a.createElement("br",null),r.a.createElement(i.b,{className:"button-feedback",to:"/","data-testid":"btn-play-again"},"Play Again"))}}]),a}(n.Component),M=Object(o.b)((function(e){var t=e.player;return{assertions:t.assertions,score:t.score}}))(G),P=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).firstPlay=function(){var t=e.props,a=[{name:t.name,score:t.score}];localStorage.setItem("ranking",JSON.stringify(a))},e.otherPlay=function(){var t=e.props,a=t.name,n=t.score,r=JSON.parse(localStorage.getItem("ranking")),c={name:a,score:n},s=[].concat(Object(D.a)(r),[c]);localStorage.setItem("ranking",JSON.stringify(s))},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){localStorage.getItem("ranking")?this.otherPlay():this.firstPlay()}},{key:"componentWillUnmount",value:function(){var e;(0,this.props.dispatch)({type:"GET_RESET",payload:e})}},{key:"render",value:function(){return r.a.createElement("div",{"data-testid":"feedback-text"},r.a.createElement(_,null),r.a.createElement(M,null))}}]),a}(n.Component),R=Object(o.b)((function(e){var t=e.player;return{name:t.name,score:t.score}}))(P),F=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={ranking:[]},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("ranking")).sort((function(e,t){return t.score-e.score}));this.setState({ranking:e})}},{key:"render",value:function(){var e=this.state.ranking;return r.a.createElement("div",{className:"ranking"},r.a.createElement("p",{"data-testid":"ranking-title"},"Ranking"),e.map((function(e,t){return r.a.createElement("div",{className:"player",key:t},r.a.createElement("span",{"data-testid":"player-name-".concat(t)},e.name),r.a.createElement("span",{"data-testid":"player-score-".concat(t)},e.score))})),r.a.createElement("br",null),r.a.createElement(i.b,{to:"/","data-testid":"btn-go-home",className:"play-again"},"Play Again"))}}]),a}(n.Component);function J(){return r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/",exact:!0,component:S}),r.a.createElement(l.a,{path:"/game",exact:!0,component:C}),r.a.createElement(l.a,{path:"/settings",exact:!0,component:I}),r.a.createElement(l.a,{path:"/feedback",exact:!0,component:R}),r.a.createElement(l.a,{path:"/ranking",exact:!0,component:F}))}var Q=a(16),L=a(29),U=a(13),B={name:"Anonimo",assertions:0,score:0,gravatarEmail:"anonimo@email.com"},H=Object(Q.combineReducers)({player:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_NAME":return Object(U.a)(Object(U.a)({},e),{},{name:t.payload});case"GET_EMAIL":return Object(U.a)(Object(U.a)({},e),{},{gravatarEmail:t.payload});case"GET_SCORE":return Object(U.a)(Object(U.a)({},e),{},{score:t.payload});case"GET_ASSERTION":return Object(U.a)(Object(U.a)({},e),{},{assertions:t.payload});case"GET_RESET":return B;default:return e}}}),W=Object(Q.legacy_createStore)(H,Object(L.composeWithDevTools)());window.Cypress&&(window.store=W);var V=W;s.a.render(r.a.createElement(i.a,{basename:"/tp-trivia"},r.a.createElement(o.a,{store:V},r.a.createElement(J,null))),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.77f5352c.chunk.js.map